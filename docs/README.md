# REST‑API  
**REST API for performing CURD operations using Spring Boot and Mongo‑DB**  

---  

## Table of Contents  

| Section | Description |
|---------|-------------|
| **1️⃣ Overview** | What the project does and its main features |
| **2️⃣ Prerequisites** | Software you need before you can install |
| **3️⃣ Installation** | How to get the code, configure it and run it locally |
| **4️⃣ Usage** | Starting the service, environment variables and health checks |
| **5️⃣ API Documentation** | Full list of endpoints, request/response schemas and HTTP status codes |
| **6️⃣ Examples** | `curl`/Postman snippets for each operation |
| **7️⃣ Testing** | Running the unit/integration test suite |
| **8️⃣ Swagger UI** | Interactive API explorer |
| **9️⃣ Deployment** | Quick notes for Docker/Kubernetes or cloud providers |
| **🔟 Contributing** | How to submit bugs, feature requests or pull‑requests |
| **📄 License** | Project licensing information |

---  

## 1️⃣ Overview  

`REST-API` is a minimal **Spring Boot** application that demonstrates how to build a **CRUD** (Create‑Read‑Update‑Delete) service backed by **MongoDB**.  

* **Tech stack** – Java 17, Spring Boot 3.x, Spring Data MongoDB, Maven, Lombok, MapStruct, JUnit 5, Testcontainers.  
* **Features** –  
  * Fully typed domain model (`User`) with validation.  
  * Repository abstraction via Spring Data MongoDB.  
  * Service layer with business‑logic separation.  
  * Global exception handling (`@RestControllerAdvice`).  
  * OpenAPI/Swagger documentation (`springdoc-openapi`).  
  * Dockerfile for containerised builds.  

---  

## 2️⃣ Prerequisites  

| Tool | Minimum version | Why |
|------|----------------|-----|
| **Java** | 17 (or newer) | Spring Boot 3 requires Java 17+. |
| **Maven** | 3.8.5+ | Build & dependency management. |
| **MongoDB** | 5.0+ (or a running Atlas cluster) | Persistence layer. |
| **Git** | any | Clone the repository. |
| **Docker** *(optional)* | 20.10+ | Build/run the container image. |
| **cURL / HTTPie / Postman** | – | Test the endpoints. |

> **Tip** – If you don’t have a local MongoDB instance, you can spin one up with Docker:  

```bash
docker run -d --name rest-api-mongo -p 27017:27017 mongo:6.0
```

---  

## 3️⃣ Installation  

### 3.1 Clone the repository  

```bash
git clone https://github.com/your‑org/REST-API.git
cd REST-API
```

### 3.2 Configure the MongoDB connection  

The default configuration expects a MongoDB server on `mongodb://localhost:27017/restapi`.  
You can override it in three ways:

| Method | How |
|--------|-----|
| **application.properties** (recommended for local dev) | Edit `src/main/resources/application.properties` and set `spring.data.mongodb.uri`. |
| **Environment variable** | `MONGODB_URI=mongodb://host:port/database` |
| **Command‑line argument** | `--spring.data.mongodb.uri=mongodb://host:port/database` |

Example `application.properties` snippet:

```properties
spring.data.mongodb.uri=mongodb://localhost:27017/restapi
spring.data.mongodb.auto-index-creation=true

# Server port (optional)
server.port=8080
```

### 3.3 Build the project  

```bash
# Clean and package (creates an executable jar)
mvn clean package
```

If you want to skip tests (e.g., during a quick prototype):

```bash
mvn clean package -DskipTests
```

### 3.4 Run the application  

```bash
# Using Maven
mvn spring-boot:run

# Or run the fat‑jar directly
java -jar target/rest-api-0.0.1-SNAPSHOT.jar
```

The service will start on **http://localhost:8080** (or the port you configured).

### 3.5 (Optional) Run with Docker  

```bash
# Build the image
docker build -t rest-api:latest .

# Run the container (replace MONGODB_URI if needed)
docker run -d -p 8080:8080 \
  -e MONGODB_URI=mongodb://host.docker.internal:27017/restapi \
  --name rest-api \
  rest-api:latest
```

---  

## 4️⃣ Usage  

### 4️⃣1 Health‑check  

```bash
curl -s http://localhost:8080/actuator/health | jq .
```

Expected output (when everything is up):

```json
{
  "status": "UP",
  "components": {
    "mongo": {
      "status": "UP",
      "details": {
        "database": "restapi",
        "type": "MongoDB"
      }
    },
    "diskSpace": { ... }
  }
}
```

### 4️⃣2 API base URL  

All CRUD endpoints are rooted at **`/api/v1/users`**.

| Verb | Path | Description |
|------|------|-------------|
| `POST`   | `/api/v1/users` | Create a new user |
| `GET`    | `/api/v1/users` | List all users (paginated) |
| `GET`    | `/api/v1/users/{id}` | Retrieve a single user |
| `PUT`    | `/api/v1/users/{id}` | Replace a user |
| `PATCH`  | `/api/v1/users/{id}` | Partial update |
| `DELETE` | `/api/v1/users/{id}` | Delete a user |

---  

## 5️⃣ API Documentation  

> The project ships with **OpenAPI 3** documentation generated by `springdoc-openapi`.  
> Visit **`http://localhost:8080/swagger-ui.html`** (or `/swagger-ui/index.html`) after the app starts.

Below is a concise reference for each endpoint.

### 5.1 Data Model  

```json
{
  "id": "String (Mongo ObjectId)",
  "firstName": "String (required, 1‑50 chars)",
  "lastName": "String (required, 1‑50 chars)",
  "email": "String (required, valid email, unique)",
  "age": "Integer (optional, >=0)",
  "createdAt": "ISO‑8601 timestamp (generated)",
  "updatedAt": "ISO‑8601 timestamp (generated)"
}
```

### 5.2 Endpoints  

| Method | URL | Request Body | Success response | Error responses |
|--------|-----|--------------|------------------|-----------------|
| **Create** | `POST /api/v1/users` | `UserDTO` (without `id`) | `201 Created` <br/>`Location: /api/v1/users/{id}` <br/>Body: created user | `400 Bad Request` (validation) <br/>`409 Conflict` (email already exists) |
| **List** | `GET /api/v1/users` | – | `200 OK` <br/>Body: `Page<UserDTO>` (fields: `content`, `pageable`, `totalElements`, …) | `500 Internal Server Error` |
| **Get** | `GET /api/v1/users/{id}` | – | `200 OK` <br/>Body: `UserDTO` | `404 Not Found` |
| **Replace** | `PUT /api/v1/users/{id}` | Full `UserDTO` (all fields required) | `200 OK` <br/>Body: updated user | `400 Bad Request` <br/>`404 Not Found` |
| **Partial Update** | `PATCH /api/v1/users/{id}` | `Map<String,Object>` or `UserPatchDTO` (only fields to change) | `200 OK` <br/>Body: updated user | `400 Bad Request` <br/>`404 Not Found` |
| **Delete** | `DELETE /api/v1/users/{id}` | – | `204 No Content` | `404 Not Found` |

#### Validation rules (Spring `@Valid`)

| Field | Constraint |
|-------|------------|
| `firstName` / `lastName` | `@NotBlank`, `@Size(min=1,max=50)` |
| `email` | `@NotBlank`, `@Email`, unique index in